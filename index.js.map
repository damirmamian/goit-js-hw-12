{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page) {\n    const baseURL = \"https://pixabay.com/api/\";\n    console.log(baseURL);\n    const response = await axios.get(baseURL, {\n        params: {\n            key: \"53364117-23ce706026567dc1d7b8b2eb2\",\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page: page\n        },\n    });\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryLightbox;\nexport function createGallery(images) {\n    const ulElem = document.querySelector(\"ul.gallery\");\n    const markup = images.map((image) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    data-source=\"${image.largeImageURL}\"\n                    alt=\"${image.tags}\"\n                />\n            </a>\n            <ul class=\"image-info\">\n                <li class=\"image-info-item\">\n                    <p class=\"info-p\">Likes</p>\n                    <span class=\"info-span\">${image.likes}</span>\n                </li>\n                <li class=\"image-info-item\">\n                    <p class=\"info-p\">Views</p>\n                    <span class=\"info-span\">${image.views}</span>\n                </li>\n                <li class=\"image-info-item\">\n                    <p class=\"info-p\">Comments</p>\n                    <span class=\"info-span\">${image.comments}</span>\n                </li>\n                <li class=\"image-info-item\">\n                    <p class=\"info-p\">Downloads</p>\n                    <span class=\"info-span\">${image.downloads}</span>\n                </li>\n            </ul>\n        </li>`\n    ).join('');\n    ulElem.insertAdjacentHTML('beforeend', markup);\n    if (!galleryLightbox) {\n        galleryLightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    } else {\n        galleryLightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    const ulElem = document.querySelector(\".gallery\");\n    if (ulElem) {\n        ulElem.innerHTML = \"\";\n    }\n}\n\nexport function showLoader() {\n    const loader = document.querySelector('.js-loader');\n    loader.classList.add(\"loader\");\n    console.log(loader);\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector('.js-loader');\n    loader.classList.remove(\"loader\");\n}\n\nexport function showLoadButton() {\n    const LoadButton = document.querySelector(\".load-button\");\n    LoadButton.style = \"display: block\";\n}\n\nexport function hideLoadButton() {\n    const LoadButton = document.querySelector(\".load-button\");\n    LoadButton.style = \"display: none\";\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { clearGallery, showLoader, hideLoader, createGallery, showLoadButton, hideLoadButton } from \"./js/render-functions.js\";\n\nlet page = 1;\nlet query = \"\";\nconst perPage = 15;\nconst form = document.querySelector(\".form\");\nconst loadButton = document.querySelector(\".load-button\");\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const inputValue = document.querySelector(\"input\").value.trim();\n    if (inputValue === \"\") {\n        return;\n    }\n    page = 1;\n    query = inputValue;\n\n    clearGallery();\n    hideLoadButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            hideLoader();\n            form.reset();\n            return;\n        }\n\n        createGallery(data.hits);\n        hideLoader();\n\n        if (data.totalHits > perPage) {\n            showLoadButton();\n        }\n\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            message: 'Something went wrong! Please try again later.',\n            position: 'topRight',\n        });\n        hideLoader();\n    } finally {\n        form.reset();\n    }\n});\n\nloadButton.addEventListener(\"click\", async () => {\n    page += 1;\n    hideLoadButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        createGallery(data.hits);\n        hideLoader();\n\n        const card = document.querySelector(\".gallery-item\");\n        if (card) {\n            const cardHeight = card.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        }\n        const totalPages = Math.ceil(data.totalHits / perPage);\n        if (page >= totalPages) {\n            hideLoadButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        } else {\n            showLoadButton();\n        }\n\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            message: 'Error loading more images',\n            position: 'topRight',\n        });\n        hideLoader();\n    }\n});"],"names":["getImagesByQuery","query","page","baseURL","axios","galleryLightbox","createGallery","images","ulElem","markup","image","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadButton","LoadButton","hideLoadButton","perPage","form","loadButton","inputValue","data","iziToast","error","card","cardHeight","totalPages"],"mappings":"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"}